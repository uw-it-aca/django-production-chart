{{- $dot := . -}}
{{- $base_name := ( include "django-production-chart.releaseIdentifier" . ) }}
{{- range .Values.services -}}
{{- $type := ( default "" .type ) }}
{{- $name := ( ( empty $type ) | ternary $base_name ( printf "%s-service-%s" $base_name ( lower $type ) ) ) }}
---
{{ include "django-production-chart.service" (dict "root" $dot "name" $name "service" . ) }}
{{- end }}